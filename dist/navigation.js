"use strict";function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}(function(root,factory){if(typeof define==="function"&&define.amd){define([],factory)}else if((typeof exports==="undefined"?"undefined":_typeof(exports))==="object"){module.exports=factory()}else{root.navigation=factory()}})(typeof self!=="undefined"?self:void 0,function(){'use strict';var navigation={};var settings;var defaults={breakpoint:null,main:null,nav:null,orientation:"vertical",position:0,minHeights:true};var navScrollState={position:0,top:0};var setMinHeight=function setMinHeight(){if(!settings.minHeights)return;var navHeight=settings.nav.querySelector("ul").scrollHeight;var windowHeight=window.innerHeight;var minHeight=navHeight>windowHeight?navHeight+"px":windowHeight+"px";settings.main.style.minHeight=minHeight;settings.nav.style.minHeight=minHeight};var toggleSection=function toggleSection(event){var target=event.target;if(!(target instanceof HTMLAnchorElement)){return}if(!target.parentNode.children[1]){return}event.preventDefault();target.parentNode.classList.toggle("open");setMinHeight();positionNav()};var positionNav=function positionNav(){var windowTop=window.scrollY;var scrollDiff=navScrollState.top-windowTop;var upperBound=(settings.nav.scrollHeight-window.innerHeight)*-1;var position=navScrollState.position;position=position+scrollDiff;if(settings.position<position){position=settings.position}if(position<upperBound){position=upperBound}navScrollState.position=position;navScrollState.top=windowTop;settings.nav.style.top=position+"px"};var extendDefaults=function extendDefaults(defaults,options){var property;for(property in options){if(Object.prototype.hasOwnProperty.call(options,property)){defaults[property]=options[property]}}return defaults};navigation.destroy=function(){if(!settings)return;settings.element.removeEventListener("click",toggleSection,false);if("vertical"===settings.orientation){document.removeEventListener("wheel",positionNav,{capture:true,passive:true})}settings=null};navigation.init=function(options){if(!options.nav||!options.main)return;navigation.destroy();settings=extendDefaults(defaults,options||{});settings.nav.addEventListener("click",toggleSection,false);if("vertical"===settings.orientation){document.addEventListener("wheel",function(){if(settings.breakpoint&&settings.breakpoint>window.innerWidth||settings.main.offsetHeight<settings.nav.scrollHeight||window.innerHeight>settings.nav.scrollHeight+settings.position||settings.position<settings.nav.getBoundingClientRect().top){settings.nav.removeAttribute("style");return}requestAnimationFrame(positionNav)},{capture:true,passive:true});setMinHeight();window.addEventListener("resize",setMinHeight)}};return navigation});